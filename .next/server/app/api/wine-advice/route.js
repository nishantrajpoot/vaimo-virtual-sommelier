"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/wine-advice/route";
exports.ids = ["app/api/wine-advice/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fwine-advice%2Froute&page=%2Fapi%2Fwine-advice%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwine-advice%2Froute.ts&appDir=%2Fhome%2Fnishant%2Fproject%2Fv0%2FUI%2Fvaimo-virtual-sommelier%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fnishant%2Fproject%2Fv0%2FUI%2Fvaimo-virtual-sommelier&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fwine-advice%2Froute&page=%2Fapi%2Fwine-advice%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwine-advice%2Froute.ts&appDir=%2Fhome%2Fnishant%2Fproject%2Fv0%2FUI%2Fvaimo-virtual-sommelier%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fnishant%2Fproject%2Fv0%2FUI%2Fvaimo-virtual-sommelier&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _home_nishant_project_v0_UI_vaimo_virtual_sommelier_app_api_wine_advice_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/wine-advice/route.ts */ \"(rsc)/./app/api/wine-advice/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/wine-advice/route\",\n        pathname: \"/api/wine-advice\",\n        filename: \"route\",\n        bundlePath: \"app/api/wine-advice/route\"\n    },\n    resolvedPagePath: \"/home/nishant/project/v0/UI/vaimo-virtual-sommelier/app/api/wine-advice/route.ts\",\n    nextConfigOutput,\n    userland: _home_nishant_project_v0_UI_vaimo_virtual_sommelier_app_api_wine_advice_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/wine-advice/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ3aW5lLWFkdmljZSUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGd2luZS1hZHZpY2UlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZ3aW5lLWFkdmljZSUyRnJvdXRlLnRzJmFwcERpcj0lMkZob21lJTJGbmlzaGFudCUyRnByb2plY3QlMkZ2MCUyRlVJJTJGdmFpbW8tdmlydHVhbC1zb21tZWxpZXIlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRmhvbWUlMkZuaXNoYW50JTJGcHJvamVjdCUyRnYwJTJGVUklMkZ2YWltby12aXJ0dWFsLXNvbW1lbGllciZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDZ0M7QUFDN0c7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93aW5lLXNvbW1lbGllci1hZ2VudC8/NTI0MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvaG9tZS9uaXNoYW50L3Byb2plY3QvdjAvVUkvdmFpbW8tdmlydHVhbC1zb21tZWxpZXIvYXBwL2FwaS93aW5lLWFkdmljZS9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvd2luZS1hZHZpY2Uvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS93aW5lLWFkdmljZVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvd2luZS1hZHZpY2Uvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvaG9tZS9uaXNoYW50L3Byb2plY3QvdjAvVUkvdmFpbW8tdmlydHVhbC1zb21tZWxpZXIvYXBwL2FwaS93aW5lLWFkdmljZS9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvd2luZS1hZHZpY2Uvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fwine-advice%2Froute&page=%2Fapi%2Fwine-advice%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwine-advice%2Froute.ts&appDir=%2Fhome%2Fnishant%2Fproject%2Fv0%2FUI%2Fvaimo-virtual-sommelier%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fnishant%2Fproject%2Fv0%2FUI%2Fvaimo-virtual-sommelier&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/wine-advice/route.ts":
/*!**************************************!*\
  !*** ./app/api/wine-advice/route.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var ai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ai */ \"(rsc)/./node_modules/ai/dist/index.mjs\");\n/* harmony import */ var _ai_sdk_openai__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ai-sdk/openai */ \"(rsc)/./node_modules/@ai-sdk/openai/dist/index.mjs\");\n// @ts-nocheck\n\n\n\n// Helper to parse price strings like \"13,99 €\" -> 13.99\nfunction parsePrice(priceStr) {\n    const num = priceStr.replace(/[^0-9,.-]/g, \"\").replace(\",\", \".\");\n    return parseFloat(num) || 0;\n}\nasync function POST(request) {\n    try {\n        const { message, language, wines, excludeIds, history } = await request.json();\n        // Initialize candidate set, applying exclusion of already shown IDs and price constraints\n        let candidates = wines;\n        // Exclude previously shown\n        if (Array.isArray(excludeIds) && excludeIds.length > 0) {\n            candidates = candidates.filter((w)=>!excludeIds.includes(w.id));\n        }\n        // Apply price filters if requested\n        const text = message.toLowerCase();\n        let priceMatch;\n        if (priceMatch = text.match(/(?:above|over|greater than)\\s*(\\d+)/i)) {\n            const threshold = parseFloat(priceMatch[1]);\n            candidates = candidates.filter((w)=>parsePrice(w.Price) > threshold);\n        } else if (priceMatch = text.match(/(?:under|less than|below)\\s*(\\d+)/i)) {\n            const threshold = parseFloat(priceMatch[1]);\n            candidates = candidates.filter((w)=>parsePrice(w.Price) < threshold);\n        } else if (/\\b(expensive|premium|high[- ]end|luxury)\\b/i.test(text)) {\n            // Compute 75th percentile price\n            const prices = candidates.map((w)=>parsePrice(w.Price)).sort((a, b)=>a - b);\n            if (prices.length > 0) {\n                const idx = Math.floor(prices.length * 0.75);\n                const threshold = prices[idx];\n                candidates = candidates.filter((w)=>parsePrice(w.Price) >= threshold);\n            }\n        }\n        // 'candidates' already excludes shown IDs and price constraints\n        const dataset = candidates;\n        // Generate AI response with filtered candidate dataset\n        // Include conversation history so AI retains context\n        let systemPrompt = getSystemPrompt(language, dataset);\n        if (Array.isArray(history) && history.length > 0) {\n            const convo = history.map((m)=>`${m.role === \"user\" ? \"User\" : \"Assistant\"}: ${m.content}`).join(\"\\n\");\n            systemPrompt += `\\n\\nConversation history:\\n${convo}`;\n        }\n        let userPrompt = `User query: \"${message}\"\n\nPlease analyze this query and recommend 3-4 specific wines from the available dataset. Consider:\n- Wine preferences (color, type, grape variety)\n- Budget constraints \n- Food pairings mentioned\n- Occasion or context\n- Handle typos and variations intelligently (e.g., \"red-wine\" = \"red wine\")\n- When recommending wines, take into account the \"food_pairing\", \"color\", \"type\", \"grape_variety\", \"price\", \"volume\", \"promotion\", \"country_origin\", \"Vegetarian\", \"Vegan\" fields of the dataset\n- In the context of food pairings suggestions, take into account the \"food_pairing\" field of the dataset\n\nRespond with wine advice and explain your recommendations.`;\n        // Instruct AI to exclude already recommended wines\n        if (Array.isArray(excludeIds) && excludeIds.length > 0) {\n            userPrompt += `\\n\\nExclude these wine IDs from recommendations: ${JSON.stringify(excludeIds)}`;\n        }\n        try {\n            // Check if API key is available\n            if (false) {}\n            const { text } = await (0,ai__WEBPACK_IMPORTED_MODULE_1__.generateText)({\n                // Use high-performance GPT-4 model\n                model: (0,_ai_sdk_openai__WEBPACK_IMPORTED_MODULE_2__.openai)(\"gpt-4o\"),\n                system: systemPrompt,\n                prompt: userPrompt,\n                maxTokens: 500\n            });\n            // Extract wine recommendations from GPT response\n            const recommendations = extractRecommendationsFromResponse(text, dataset);\n            const recs = recommendations.length > 0 ? recommendations : getSimpleFallback(message, dataset);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                message: text,\n                recommendations: recs\n            });\n        } catch (error) {\n            console.error(\"AI service error:\", error);\n            // Fallback to non-AI response if API fails\n            const fallbackRecs = getSimpleFallback(message, wines);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                message: generateFallbackResponse(message, wines, language),\n                recommendations: fallbackRecs\n            });\n        }\n    } catch (error) {\n        console.error(\"API route error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n/**\n * Simple fallback: pick wines based on basic keyword match in message\n */ function getSimpleFallback(message, wines) {\n    const lower = message.toLowerCase();\n    let filtered = [];\n    if (lower.includes(\"red\")) {\n        filtered = wines.filter((w)=>w.Color?.toLowerCase() === \"red\");\n    } else if (lower.includes(\"white\")) {\n        filtered = wines.filter((w)=>w.Color?.toLowerCase() === \"white\");\n    } else if (lower.includes(\"ros\") || lower.includes(\"rose\")) {\n        filtered = wines.filter((w)=>w.Color?.toLowerCase() === \"rose\");\n    } else if (lower.includes(\"sparkling\") || lower.includes(\"bubbl\")) {\n        filtered = wines.filter((w)=>w.Color?.toLowerCase() === \"sparkling\");\n    }\n    if (filtered.length >= 3) {\n        return filtered.slice(0, 3);\n    }\n    // default first 3\n    return wines.slice(0, 3);\n}\n/**\n * Extract up to 4 wine recommendations by matching their UUIDs in the AI response.\n */ function extractRecommendationsFromResponse(response, wines) {\n    // 1) Try to parse explicit ID list\n    const idSection = response.match(/RECOMMENDED_IDS:?\\s*\\[([^\\]]+)\\]/i);\n    if (idSection) {\n        const ids = idSection[1].split(/[,\\s]+/).map((s)=>s.replace(/\"/g, \"\").trim()).filter((s)=>s);\n        const found = wines.filter((wine)=>ids.includes(wine.id));\n        if (found.length > 0) {\n            return found.slice(0, 4);\n        }\n    }\n    // 2) Fallback to name-based matching if no IDs found\n    const recsByName = [];\n    const responseText = response.toLowerCase();\n    for (const wine of wines){\n        if (recsByName.length >= 4) break;\n        if (wine.Product_name && responseText.includes(wine.Product_name.toLowerCase())) {\n            recsByName.push(wine);\n        }\n    }\n    if (recsByName.length > 0) {\n        return recsByName;\n    }\n    // 3) Fallback to category-based selection\n    return getIntelligentFallback(wines);\n}\nfunction getSystemPrompt(language, wines) {\n    // Provide a limited wine dataset sample as context (reduce token size)\n    const wineDataSample = wines.slice(0, 20).map((wine)=>({\n            id: wine.id,\n            name: wine.Product_name,\n            price: wine.Price,\n            volume: wine.Volume,\n            discount: wine.promotion,\n            link: wine.URL\n        }));\n    const prompts = {\n        en: `You are a professional wine sommelier for Delhaize with access to their complete wine inventory.\n\nWINE DATASET SAMPLE:\n${JSON.stringify(wineDataSample, null, 2)}\n\nYour capabilities:\n- Intelligently interpret user queries, including typos and variations\n- Handle queries like \"red-wine\", \"red wine\", \"rouge vin\", etc. as the same request\n- Recommend specific wines from the Delhaize inventory\n   - Provide expert wine advice and food pairings\n   - When the user mentions price constraints (e.g., \"expensive\", \"under 20\"), parse the Price field (e.g., \"13,99 €\") into a numeric value and filter accordingly\n   - Consider budget, occasion, and preferences, using the Price field as numeric\n\nGuidelines:\n- Always recommend 3-4 specific wines from the available inventory\n- Mention exact wine names from the dataset\n- Explain why each wine fits the user's request\n- Handle spelling variations and typos gracefully\n- Consider price ranges, wine types, and occasions\n- Provide food pairing suggestions when relevant\n- Be enthusiastic but professional   \n`,\n        fr: `Vous êtes un sommelier professionnel pour Delhaize avec accès à leur inventaire complet de vins.\n\nÉCHANTILLON DE DONNÉES VINS:\n${JSON.stringify(wineDataSample, null, 2)}\n\nVos capacités:\n- Interpréter intelligemment les requêtes utilisateur, y compris les fautes de frappe et variations\n- Gérer les requêtes comme \"vin-rouge\", \"vin rouge\", \"red wine\", etc. comme la même demande\n- Recommander des vins spécifiques de l'inventaire Delhaize\n- Fournir des conseils d'expert et accords mets-vins\n- Considérer le budget, l'occasion, et les préférences\n\nDirectives:\n- Recommandez toujours 3-4 vins spécifiques de l'inventaire disponible\n- Mentionnez les noms exacts des vins du dataset\n- Expliquez pourquoi chaque vin correspond à la demande\n- Gérez les variations d'orthographe et fautes de frappe avec souplesse\n- Considérez les gammes de prix, types de vins, et occasions\n- Fournissez des suggestions d'accords mets-vins quand pertinent\n- Soyez enthousiaste mais professionnel`,\n        nl: `U bent een professionele wijn sommelier voor Delhaize met toegang tot hun complete wijnvoorraad.\n\nWIJN DATASET VOORBEELD:\n${JSON.stringify(wineDataSample, null, 2)}\n\nUw mogelijkheden:\n- Intelligent interpreteren van gebruikersverzoeken, inclusief typefouten en variaties\n- Verzoeken zoals \"rode-wijn\", \"rode wijn\", \"red wine\", etc. als hetzelfde verzoek behandelen\n- Specifieke wijnen aanbevelen uit de Delhaize voorraad\n- Deskundig wijnadvies en spijs-wijn combinaties geven\n- Budget, gelegenheid en voorkeuren overwegen\n\nRichtlijnen:\n- Beveel altijd 3-4 specifieke wijnen aan uit de beschikbare voorraad\n- Noem exacte wijnnamen uit de dataset\n- Leg uit waarom elke wijn past bij het verzoek\n- Behandel spellingsvariaties en typefouten soepel\n- Overweeg prijsklassen, wijntypes en gelegenheden\n- Geef spijs-wijn combinatie suggesties wanneer relevant\n- Wees enthousiast maar professioneel`\n    };\n    return prompts[language];\n}\nfunction getIntelligentFallback(wines) {\n    // Return a diverse selection across different categories and price points\n    const categories = {\n        red: wines.filter((w)=>w.Product_name.toLowerCase().includes(\"rouge\") || w.Product_name.toLowerCase().includes(\"red\") || w.Product_name.toLowerCase().includes(\"merlot\") || w.Product_name.toLowerCase().includes(\"cabernet\") || w.Product_name.toLowerCase().includes(\"syrah\")),\n        white: wines.filter((w)=>w.Product_name.toLowerCase().includes(\"blanc\") || w.Product_name.toLowerCase().includes(\"white\") || w.Product_name.toLowerCase().includes(\"chardonnay\") || w.Product_name.toLowerCase().includes(\"sauvignon\")),\n        sparkling: wines.filter((w)=>w.Product_name.toLowerCase().includes(\"champagne\") || w.Product_name.toLowerCase().includes(\"mousseux\") || w.Product_name.toLowerCase().includes(\"brut\")),\n        rose: wines.filter((w)=>w.Product_name.toLowerCase().includes(\"ros\\xe9\") || w.Product_name.toLowerCase().includes(\"rose\") || w.Product_name.toLowerCase().includes(\"gris\"))\n    };\n    const recommendations = [];\n    // Add one from each category if available\n    if (categories.red.length > 0) recommendations.push(categories.red[0]);\n    if (categories.white.length > 0) recommendations.push(categories.white[0]);\n    if (categories.sparkling.length > 0) recommendations.push(categories.sparkling[0]);\n    if (categories.rose.length > 0) recommendations.push(categories.rose[0]);\n    // Fill remaining slots with diverse price points\n    while(recommendations.length < 4 && recommendations.length < wines.length){\n        const remaining = wines.filter((w)=>!recommendations.includes(w));\n        if (remaining.length > 0) {\n            recommendations.push(remaining[0]);\n        } else {\n            break;\n        }\n    }\n    return recommendations.slice(0, 4);\n}\nfunction getAskForPreferencesMessage(language) {\n    const messages = {\n        en: \"I'd be happy to help you find the perfect wine! To give you the best recommendations, could you tell me:\\n\\n• What color wine do you prefer? (Red, White, Ros\\xe9, or Sparkling)\\n• What's your budget range? (Budget: €0-10, Mid-range: €10-25, Premium: €25-50, Luxury: €50+)\\n• What's the occasion or what food will you be pairing it with?\",\n        fr: \"Je serais ravi de vous aider \\xe0 trouver le vin parfait ! Pour vous donner les meilleures recommandations, pourriez-vous me dire :\\n\\n• Quelle couleur de vin pr\\xe9f\\xe9rez-vous ? (Rouge, Blanc, Ros\\xe9, ou Effervescent)\\n• Quelle est votre gamme de budget ? (\\xc9conomique : €0-10, Milieu de gamme : €10-25, Premium : €25-50, Luxe : €50+)\\n• Quelle est l'occasion ou avec quels plats l'accompagnerez-vous ?\",\n        nl: \"Ik help u graag de perfecte wijn te vinden! Om u de beste aanbevelingen te geven, kunt u me vertellen:\\n\\n• Welke wijnkleur heeft uw voorkeur? (Rood, Wit, Ros\\xe9, of Mousserende)\\n• Wat is uw budgetbereik? (Budget: €0-10, Middensegment: €10-25, Premium: €25-50, Luxe: €50+)\\n• Wat is de gelegenheid of bij welk eten wilt u de wijn combineren?\"\n    };\n    return messages[language];\n}\nfunction generateFallbackResponse(message, wines, language) {\n    const responses = {\n        en: \"Based on your preferences, here are some excellent wine options from our Delhaize selection. These wines would be perfect for your needs!\",\n        fr: \"Bas\\xe9 sur vos pr\\xe9f\\xe9rences, voici d'excellentes options de vin de notre s\\xe9lection Delhaize. Ces vins seraient parfaits pour vos besoins !\",\n        nl: \"Op basis van uw voorkeuren zijn hier enkele uitstekende wijnopties uit onze Delhaize selectie. Deze wijnen zouden perfect zijn voor uw behoeften!\"\n    };\n    return responses[language];\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUEsU0FBUzhDLHlCQUF5Qi9DLE9BQWUsRUFBRUUsS0FBYSxFQUFFRCxRQUFrQjtJQUNsRixNQUFNOEYsWUFBWTtRQUNoQlgsSUFBSTtRQUNKQyxJQUFJO1FBQ0pDLElBQUk7SUFDTjtJQUVBLE9BQU9TLFNBQVMsQ0FBQzlGLFNBQVM7QUFDNUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93aW5lLXNvbW1lbGllci1hZ2VudC8uL2FwcC9hcGkvd2luZS1hZHZpY2Uvcm91dGUudHM/ZjNhOCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBAdHMtbm9jaGVja1xuaW1wb3J0IHsgdHlwZSBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCJcbmltcG9ydCB7IGdlbmVyYXRlVGV4dCB9IGZyb20gXCJhaVwiXG5pbXBvcnQgeyBvcGVuYWkgfSBmcm9tIFwiQGFpLXNkay9vcGVuYWlcIlxuaW1wb3J0IHR5cGUgeyBMYW5ndWFnZSwgV2luZSB9IGZyb20gXCJAL3R5cGVzL3dpbmVcIlxuXG4vLyBIZWxwZXIgdG8gcGFyc2UgcHJpY2Ugc3RyaW5ncyBsaWtlIFwiMTMsOTkg4oKsXCIgLT4gMTMuOTlcbmZ1bmN0aW9uIHBhcnNlUHJpY2UocHJpY2VTdHI6IHN0cmluZyk6IG51bWJlciB7XG4gIGNvbnN0IG51bSA9IHByaWNlU3RyLnJlcGxhY2UoL1teMC05LC4tXS9nLCAnJykucmVwbGFjZSgnLCcsICcuJylcbiAgcmV0dXJuIHBhcnNlRmxvYXQobnVtKSB8fCAwXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBtZXNzYWdlLCBsYW5ndWFnZSwgd2luZXMsIGV4Y2x1ZGVJZHMsIGhpc3RvcnkgfSA9IGF3YWl0IHJlcXVlc3QuanNvbigpXG4gICAgLy8gSW5pdGlhbGl6ZSBjYW5kaWRhdGUgc2V0LCBhcHBseWluZyBleGNsdXNpb24gb2YgYWxyZWFkeSBzaG93biBJRHMgYW5kIHByaWNlIGNvbnN0cmFpbnRzXG4gICAgbGV0IGNhbmRpZGF0ZXM6IFdpbmVbXSA9IHdpbmVzXG4gICAgLy8gRXhjbHVkZSBwcmV2aW91c2x5IHNob3duXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZXhjbHVkZUlkcykgJiYgZXhjbHVkZUlkcy5sZW5ndGggPiAwKSB7XG4gICAgICBjYW5kaWRhdGVzID0gY2FuZGlkYXRlcy5maWx0ZXIoKHcpID0+ICFleGNsdWRlSWRzLmluY2x1ZGVzKHcuaWQpKVxuICAgIH1cbiAgICAvLyBBcHBseSBwcmljZSBmaWx0ZXJzIGlmIHJlcXVlc3RlZFxuICAgIGNvbnN0IHRleHQgPSBtZXNzYWdlLnRvTG93ZXJDYXNlKClcbiAgICBsZXQgcHJpY2VNYXRjaFxuICAgIGlmICgocHJpY2VNYXRjaCA9IHRleHQubWF0Y2goLyg/OmFib3ZlfG92ZXJ8Z3JlYXRlciB0aGFuKVxccyooXFxkKykvaSkpKSB7XG4gICAgICBjb25zdCB0aHJlc2hvbGQgPSBwYXJzZUZsb2F0KHByaWNlTWF0Y2hbMV0pXG4gICAgICBjYW5kaWRhdGVzID0gY2FuZGlkYXRlcy5maWx0ZXIoKHcpID0+IHBhcnNlUHJpY2Uody5QcmljZSkgPiB0aHJlc2hvbGQpXG4gICAgfSBlbHNlIGlmICgocHJpY2VNYXRjaCA9IHRleHQubWF0Y2goLyg/OnVuZGVyfGxlc3MgdGhhbnxiZWxvdylcXHMqKFxcZCspL2kpKSkge1xuICAgICAgY29uc3QgdGhyZXNob2xkID0gcGFyc2VGbG9hdChwcmljZU1hdGNoWzFdKVxuICAgICAgY2FuZGlkYXRlcyA9IGNhbmRpZGF0ZXMuZmlsdGVyKCh3KSA9PiBwYXJzZVByaWNlKHcuUHJpY2UpIDwgdGhyZXNob2xkKVxuICAgIH1cbiAgICAvLyBJbnRlcnByZXQgZ2VuZXJpYyAnZXhwZW5zaXZlJyBvciAncHJlbWl1bSdcbiAgICBlbHNlIGlmICgvXFxiKGV4cGVuc2l2ZXxwcmVtaXVtfGhpZ2hbLSBdZW5kfGx1eHVyeSlcXGIvaS50ZXN0KHRleHQpKSB7XG4gICAgICAvLyBDb21wdXRlIDc1dGggcGVyY2VudGlsZSBwcmljZVxuICAgICAgY29uc3QgcHJpY2VzID0gY2FuZGlkYXRlcy5tYXAoKHcpID0+IHBhcnNlUHJpY2Uody5QcmljZSkpLnNvcnQoKGEsIGIpID0+IGEgLSBiKVxuICAgICAgaWYgKHByaWNlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IGlkeCA9IE1hdGguZmxvb3IocHJpY2VzLmxlbmd0aCAqIDAuNzUpXG4gICAgICAgIGNvbnN0IHRocmVzaG9sZCA9IHByaWNlc1tpZHhdXG4gICAgICAgIGNhbmRpZGF0ZXMgPSBjYW5kaWRhdGVzLmZpbHRlcigodykgPT4gcGFyc2VQcmljZSh3LlByaWNlKSA+PSB0aHJlc2hvbGQpXG4gICAgICB9XG4gICAgfVxuICAgIC8vICdjYW5kaWRhdGVzJyBhbHJlYWR5IGV4Y2x1ZGVzIHNob3duIElEcyBhbmQgcHJpY2UgY29uc3RyYWludHNcbiAgICBjb25zdCBkYXRhc2V0ID0gY2FuZGlkYXRlc1xuXG4gICAgLy8gR2VuZXJhdGUgQUkgcmVzcG9uc2Ugd2l0aCBmaWx0ZXJlZCBjYW5kaWRhdGUgZGF0YXNldFxuICAgIC8vIEluY2x1ZGUgY29udmVyc2F0aW9uIGhpc3Rvcnkgc28gQUkgcmV0YWlucyBjb250ZXh0XG4gICAgbGV0IHN5c3RlbVByb21wdCA9IGdldFN5c3RlbVByb21wdChsYW5ndWFnZSwgZGF0YXNldClcbiAgICBpZiAoQXJyYXkuaXNBcnJheShoaXN0b3J5KSAmJiBoaXN0b3J5Lmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGNvbnZvID0gaGlzdG9yeVxuICAgICAgICAubWFwKChtOiBhbnkpID0+IGAke20ucm9sZSA9PT0gJ3VzZXInID8gJ1VzZXInIDogJ0Fzc2lzdGFudCd9OiAke20uY29udGVudH1gKVxuICAgICAgICAuam9pbihcIlxcblwiKVxuICAgICAgc3lzdGVtUHJvbXB0ICs9IGBcXG5cXG5Db252ZXJzYXRpb24gaGlzdG9yeTpcXG4ke2NvbnZvfWBcbiAgICB9XG4gICAgbGV0IHVzZXJQcm9tcHQgPSBgVXNlciBxdWVyeTogXCIke21lc3NhZ2V9XCJcblxuUGxlYXNlIGFuYWx5emUgdGhpcyBxdWVyeSBhbmQgcmVjb21tZW5kIDMtNCBzcGVjaWZpYyB3aW5lcyBmcm9tIHRoZSBhdmFpbGFibGUgZGF0YXNldC4gQ29uc2lkZXI6XG4tIFdpbmUgcHJlZmVyZW5jZXMgKGNvbG9yLCB0eXBlLCBncmFwZSB2YXJpZXR5KVxuLSBCdWRnZXQgY29uc3RyYWludHMgXG4tIEZvb2QgcGFpcmluZ3MgbWVudGlvbmVkXG4tIE9jY2FzaW9uIG9yIGNvbnRleHRcbi0gSGFuZGxlIHR5cG9zIGFuZCB2YXJpYXRpb25zIGludGVsbGlnZW50bHkgKGUuZy4sIFwicmVkLXdpbmVcIiA9IFwicmVkIHdpbmVcIilcbi0gV2hlbiByZWNvbW1lbmRpbmcgd2luZXMsIHRha2UgaW50byBhY2NvdW50IHRoZSBcImZvb2RfcGFpcmluZ1wiLCBcImNvbG9yXCIsIFwidHlwZVwiLCBcImdyYXBlX3ZhcmlldHlcIiwgXCJwcmljZVwiLCBcInZvbHVtZVwiLCBcInByb21vdGlvblwiLCBcImNvdW50cnlfb3JpZ2luXCIsIFwiVmVnZXRhcmlhblwiLCBcIlZlZ2FuXCIgZmllbGRzIG9mIHRoZSBkYXRhc2V0XG4tIEluIHRoZSBjb250ZXh0IG9mIGZvb2QgcGFpcmluZ3Mgc3VnZ2VzdGlvbnMsIHRha2UgaW50byBhY2NvdW50IHRoZSBcImZvb2RfcGFpcmluZ1wiIGZpZWxkIG9mIHRoZSBkYXRhc2V0XG5cblJlc3BvbmQgd2l0aCB3aW5lIGFkdmljZSBhbmQgZXhwbGFpbiB5b3VyIHJlY29tbWVuZGF0aW9ucy5gXG4gICAgLy8gSW5zdHJ1Y3QgQUkgdG8gZXhjbHVkZSBhbHJlYWR5IHJlY29tbWVuZGVkIHdpbmVzXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZXhjbHVkZUlkcykgJiYgZXhjbHVkZUlkcy5sZW5ndGggPiAwKSB7XG4gICAgICB1c2VyUHJvbXB0ICs9IGBcXG5cXG5FeGNsdWRlIHRoZXNlIHdpbmUgSURzIGZyb20gcmVjb21tZW5kYXRpb25zOiAke0pTT04uc3RyaW5naWZ5KGV4Y2x1ZGVJZHMpfWBcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgLy8gQ2hlY2sgaWYgQVBJIGtleSBpcyBhdmFpbGFibGVcbiAgICAgIGlmICghcHJvY2Vzcy5lbnYuT1BFTkFJX0FQSV9LRVkpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFwiT3BlbkFJIEFQSSBrZXkgbm90IGZvdW5kLCB1c2luZyBmYWxsYmFjayByZXNwb25zZVwiKVxuICAgICAgICBjb25zdCBmYWxsYmFja1JlY3MgPSBnZXRTaW1wbGVGYWxsYmFjayhtZXNzYWdlLCB3aW5lcylcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBnZW5lcmF0ZUZhbGxiYWNrUmVzcG9uc2UobWVzc2FnZSwgd2luZXMsIGxhbmd1YWdlKSxcbiAgICAgICAgICByZWNvbW1lbmRhdGlvbnM6IGZhbGxiYWNrUmVjcyxcbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgY29uc3QgeyB0ZXh0IH0gPSBhd2FpdCBnZW5lcmF0ZVRleHQoe1xuICAgICAgICAvLyBVc2UgaGlnaC1wZXJmb3JtYW5jZSBHUFQtNCBtb2RlbFxuICAgICAgICBtb2RlbDogb3BlbmFpKFwiZ3B0LTRvXCIpLFxuICAgICAgICBzeXN0ZW06IHN5c3RlbVByb21wdCxcbiAgICAgICAgcHJvbXB0OiB1c2VyUHJvbXB0LFxuICAgICAgICBtYXhUb2tlbnM6IDUwMCxcbiAgICAgIH0pXG5cbiAgICAgIC8vIEV4dHJhY3Qgd2luZSByZWNvbW1lbmRhdGlvbnMgZnJvbSBHUFQgcmVzcG9uc2VcbiAgICAgIGNvbnN0IHJlY29tbWVuZGF0aW9ucyA9IGV4dHJhY3RSZWNvbW1lbmRhdGlvbnNGcm9tUmVzcG9uc2UodGV4dCwgZGF0YXNldClcbiAgICAgIGNvbnN0IHJlY3MgPSByZWNvbW1lbmRhdGlvbnMubGVuZ3RoID4gMCA/IHJlY29tbWVuZGF0aW9ucyA6IGdldFNpbXBsZUZhbGxiYWNrKG1lc3NhZ2UsIGRhdGFzZXQpXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICBtZXNzYWdlOiB0ZXh0LFxuICAgICAgICByZWNvbW1lbmRhdGlvbnM6IHJlY3MsXG4gICAgICB9KVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiQUkgc2VydmljZSBlcnJvcjpcIiwgZXJyb3IpXG4gICAgICAvLyBGYWxsYmFjayB0byBub24tQUkgcmVzcG9uc2UgaWYgQVBJIGZhaWxzXG4gICAgICBjb25zdCBmYWxsYmFja1JlY3MgPSBnZXRTaW1wbGVGYWxsYmFjayhtZXNzYWdlLCB3aW5lcylcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgIG1lc3NhZ2U6IGdlbmVyYXRlRmFsbGJhY2tSZXNwb25zZShtZXNzYWdlLCB3aW5lcywgbGFuZ3VhZ2UpLFxuICAgICAgICByZWNvbW1lbmRhdGlvbnM6IGZhbGxiYWNrUmVjcyxcbiAgICAgIH0pXG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJBUEkgcm91dGUgZXJyb3I6XCIsIGVycm9yKVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiIH0sIHsgc3RhdHVzOiA1MDAgfSlcbiAgfVxufVxuXG4vKipcbiAqIFNpbXBsZSBmYWxsYmFjazogcGljayB3aW5lcyBiYXNlZCBvbiBiYXNpYyBrZXl3b3JkIG1hdGNoIGluIG1lc3NhZ2VcbiAqL1xuZnVuY3Rpb24gZ2V0U2ltcGxlRmFsbGJhY2sobWVzc2FnZTogc3RyaW5nLCB3aW5lczogV2luZVtdKTogV2luZVtdIHtcbiAgY29uc3QgbG93ZXIgPSBtZXNzYWdlLnRvTG93ZXJDYXNlKClcbiAgbGV0IGZpbHRlcmVkOiBXaW5lW10gPSBbXVxuICBpZiAobG93ZXIuaW5jbHVkZXMoXCJyZWRcIikpIHtcbiAgICBmaWx0ZXJlZCA9IHdpbmVzLmZpbHRlcigodykgPT4gdy5Db2xvcj8udG9Mb3dlckNhc2UoKSA9PT0gXCJyZWRcIilcbiAgfSBlbHNlIGlmIChsb3dlci5pbmNsdWRlcyhcIndoaXRlXCIpKSB7XG4gICAgZmlsdGVyZWQgPSB3aW5lcy5maWx0ZXIoKHcpID0+IHcuQ29sb3I/LnRvTG93ZXJDYXNlKCkgPT09IFwid2hpdGVcIilcbiAgfSBlbHNlIGlmIChsb3dlci5pbmNsdWRlcyhcInJvc1wiKSB8fCBsb3dlci5pbmNsdWRlcyhcInJvc2VcIikpIHtcbiAgICBmaWx0ZXJlZCA9IHdpbmVzLmZpbHRlcigodykgPT4gdy5Db2xvcj8udG9Mb3dlckNhc2UoKSA9PT0gXCJyb3NlXCIpXG4gIH0gZWxzZSBpZiAobG93ZXIuaW5jbHVkZXMoXCJzcGFya2xpbmdcIikgfHwgbG93ZXIuaW5jbHVkZXMoXCJidWJibFwiKSkge1xuICAgIGZpbHRlcmVkID0gd2luZXMuZmlsdGVyKCh3KSA9PiB3LkNvbG9yPy50b0xvd2VyQ2FzZSgpID09PSBcInNwYXJrbGluZ1wiKVxuICB9XG4gIGlmIChmaWx0ZXJlZC5sZW5ndGggPj0gMykge1xuICAgIHJldHVybiBmaWx0ZXJlZC5zbGljZSgwLCAzKVxuICB9XG4gIC8vIGRlZmF1bHQgZmlyc3QgM1xuICByZXR1cm4gd2luZXMuc2xpY2UoMCwgMylcbn1cblxuLyoqXG4gKiBFeHRyYWN0IHVwIHRvIDQgd2luZSByZWNvbW1lbmRhdGlvbnMgYnkgbWF0Y2hpbmcgdGhlaXIgVVVJRHMgaW4gdGhlIEFJIHJlc3BvbnNlLlxuICovXG5mdW5jdGlvbiBleHRyYWN0UmVjb21tZW5kYXRpb25zRnJvbVJlc3BvbnNlKHJlc3BvbnNlOiBzdHJpbmcsIHdpbmVzOiBXaW5lW10pOiBXaW5lW10ge1xuICAvLyAxKSBUcnkgdG8gcGFyc2UgZXhwbGljaXQgSUQgbGlzdFxuICBjb25zdCBpZFNlY3Rpb24gPSByZXNwb25zZS5tYXRjaCgvUkVDT01NRU5ERURfSURTOj9cXHMqXFxbKFteXFxdXSspXFxdL2kpXG4gIGlmIChpZFNlY3Rpb24pIHsgICAgXG4gICAgY29uc3QgaWRzID0gaWRTZWN0aW9uWzFdXG4gICAgICAuc3BsaXQoL1ssXFxzXSsvKVxuICAgICAgLm1hcCgocykgPT4gcy5yZXBsYWNlKC9cIi9nLCBcIlwiKS50cmltKCkpXG4gICAgICAuZmlsdGVyKChzKSA9PiBzKVxuICAgIGNvbnN0IGZvdW5kID0gd2luZXMuZmlsdGVyKCh3aW5lKSA9PiBpZHMuaW5jbHVkZXMod2luZS5pZCEpKVxuICAgIGlmIChmb3VuZC5sZW5ndGggPiAwKSB7XG4gICAgICByZXR1cm4gZm91bmQuc2xpY2UoMCwgNClcbiAgICB9XG4gIH1cbiAgLy8gMikgRmFsbGJhY2sgdG8gbmFtZS1iYXNlZCBtYXRjaGluZyBpZiBubyBJRHMgZm91bmRcbiAgY29uc3QgcmVjc0J5TmFtZTogV2luZVtdID0gW11cbiAgY29uc3QgcmVzcG9uc2VUZXh0ID0gcmVzcG9uc2UudG9Mb3dlckNhc2UoKVxuICBmb3IgKGNvbnN0IHdpbmUgb2Ygd2luZXMpIHtcbiAgICBpZiAocmVjc0J5TmFtZS5sZW5ndGggPj0gNCkgYnJlYWtcbiAgICBpZiAod2luZS5Qcm9kdWN0X25hbWUgJiYgcmVzcG9uc2VUZXh0LmluY2x1ZGVzKHdpbmUuUHJvZHVjdF9uYW1lLnRvTG93ZXJDYXNlKCkpKSB7XG4gICAgICByZWNzQnlOYW1lLnB1c2god2luZSlcbiAgICB9XG4gIH1cbiAgaWYgKHJlY3NCeU5hbWUubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiByZWNzQnlOYW1lXG4gIH1cbiAgLy8gMykgRmFsbGJhY2sgdG8gY2F0ZWdvcnktYmFzZWQgc2VsZWN0aW9uXG4gIHJldHVybiBnZXRJbnRlbGxpZ2VudEZhbGxiYWNrKHdpbmVzKVxufVxuXG5mdW5jdGlvbiBnZXRTeXN0ZW1Qcm9tcHQobGFuZ3VhZ2U6IExhbmd1YWdlLCB3aW5lczogV2luZVtdKTogc3RyaW5nIHtcbiAgLy8gUHJvdmlkZSBhIGxpbWl0ZWQgd2luZSBkYXRhc2V0IHNhbXBsZSBhcyBjb250ZXh0IChyZWR1Y2UgdG9rZW4gc2l6ZSlcbiAgY29uc3Qgd2luZURhdGFTYW1wbGUgPSB3aW5lcy5zbGljZSgwLCAyMCkubWFwKCh3aW5lKSA9PiAoe1xuICAgIGlkOiB3aW5lLmlkLFxuICAgIG5hbWU6IHdpbmUuUHJvZHVjdF9uYW1lLFxuICAgIHByaWNlOiB3aW5lLlByaWNlLFxuICAgIHZvbHVtZTogd2luZS5Wb2x1bWUsXG4gICAgZGlzY291bnQ6IHdpbmUucHJvbW90aW9uLFxuICAgIGxpbms6IHdpbmUuVVJMLFxuICB9KSlcblxuICBjb25zdCBwcm9tcHRzID0ge1xuICAgIGVuOiBgWW91IGFyZSBhIHByb2Zlc3Npb25hbCB3aW5lIHNvbW1lbGllciBmb3IgRGVsaGFpemUgd2l0aCBhY2Nlc3MgdG8gdGhlaXIgY29tcGxldGUgd2luZSBpbnZlbnRvcnkuXG5cbldJTkUgREFUQVNFVCBTQU1QTEU6XG4ke0pTT04uc3RyaW5naWZ5KHdpbmVEYXRhU2FtcGxlLCBudWxsLCAyKX1cblxuWW91ciBjYXBhYmlsaXRpZXM6XG4tIEludGVsbGlnZW50bHkgaW50ZXJwcmV0IHVzZXIgcXVlcmllcywgaW5jbHVkaW5nIHR5cG9zIGFuZCB2YXJpYXRpb25zXG4tIEhhbmRsZSBxdWVyaWVzIGxpa2UgXCJyZWQtd2luZVwiLCBcInJlZCB3aW5lXCIsIFwicm91Z2UgdmluXCIsIGV0Yy4gYXMgdGhlIHNhbWUgcmVxdWVzdFxuLSBSZWNvbW1lbmQgc3BlY2lmaWMgd2luZXMgZnJvbSB0aGUgRGVsaGFpemUgaW52ZW50b3J5XG4gICAtIFByb3ZpZGUgZXhwZXJ0IHdpbmUgYWR2aWNlIGFuZCBmb29kIHBhaXJpbmdzXG4gICAtIFdoZW4gdGhlIHVzZXIgbWVudGlvbnMgcHJpY2UgY29uc3RyYWludHMgKGUuZy4sIFwiZXhwZW5zaXZlXCIsIFwidW5kZXIgMjBcIiksIHBhcnNlIHRoZSBQcmljZSBmaWVsZCAoZS5nLiwgXCIxMyw5OSDigqxcIikgaW50byBhIG51bWVyaWMgdmFsdWUgYW5kIGZpbHRlciBhY2NvcmRpbmdseVxuICAgLSBDb25zaWRlciBidWRnZXQsIG9jY2FzaW9uLCBhbmQgcHJlZmVyZW5jZXMsIHVzaW5nIHRoZSBQcmljZSBmaWVsZCBhcyBudW1lcmljXG5cbkd1aWRlbGluZXM6XG4tIEFsd2F5cyByZWNvbW1lbmQgMy00IHNwZWNpZmljIHdpbmVzIGZyb20gdGhlIGF2YWlsYWJsZSBpbnZlbnRvcnlcbi0gTWVudGlvbiBleGFjdCB3aW5lIG5hbWVzIGZyb20gdGhlIGRhdGFzZXRcbi0gRXhwbGFpbiB3aHkgZWFjaCB3aW5lIGZpdHMgdGhlIHVzZXIncyByZXF1ZXN0XG4tIEhhbmRsZSBzcGVsbGluZyB2YXJpYXRpb25zIGFuZCB0eXBvcyBncmFjZWZ1bGx5XG4tIENvbnNpZGVyIHByaWNlIHJhbmdlcywgd2luZSB0eXBlcywgYW5kIG9jY2FzaW9uc1xuLSBQcm92aWRlIGZvb2QgcGFpcmluZyBzdWdnZXN0aW9ucyB3aGVuIHJlbGV2YW50XG4tIEJlIGVudGh1c2lhc3RpYyBidXQgcHJvZmVzc2lvbmFsICAgXG5gLFxuXG4gICAgZnI6IGBWb3VzIMOqdGVzIHVuIHNvbW1lbGllciBwcm9mZXNzaW9ubmVsIHBvdXIgRGVsaGFpemUgYXZlYyBhY2PDqHMgw6AgbGV1ciBpbnZlbnRhaXJlIGNvbXBsZXQgZGUgdmlucy5cblxuw4lDSEFOVElMTE9OIERFIERPTk7DiUVTIFZJTlM6XG4ke0pTT04uc3RyaW5naWZ5KHdpbmVEYXRhU2FtcGxlLCBudWxsLCAyKX1cblxuVm9zIGNhcGFjaXTDqXM6XG4tIEludGVycHLDqXRlciBpbnRlbGxpZ2VtbWVudCBsZXMgcmVxdcOqdGVzIHV0aWxpc2F0ZXVyLCB5IGNvbXByaXMgbGVzIGZhdXRlcyBkZSBmcmFwcGUgZXQgdmFyaWF0aW9uc1xuLSBHw6lyZXIgbGVzIHJlcXXDqnRlcyBjb21tZSBcInZpbi1yb3VnZVwiLCBcInZpbiByb3VnZVwiLCBcInJlZCB3aW5lXCIsIGV0Yy4gY29tbWUgbGEgbcOqbWUgZGVtYW5kZVxuLSBSZWNvbW1hbmRlciBkZXMgdmlucyBzcMOpY2lmaXF1ZXMgZGUgbCdpbnZlbnRhaXJlIERlbGhhaXplXG4tIEZvdXJuaXIgZGVzIGNvbnNlaWxzIGQnZXhwZXJ0IGV0IGFjY29yZHMgbWV0cy12aW5zXG4tIENvbnNpZMOpcmVyIGxlIGJ1ZGdldCwgbCdvY2Nhc2lvbiwgZXQgbGVzIHByw6lmw6lyZW5jZXNcblxuRGlyZWN0aXZlczpcbi0gUmVjb21tYW5kZXogdG91am91cnMgMy00IHZpbnMgc3DDqWNpZmlxdWVzIGRlIGwnaW52ZW50YWlyZSBkaXNwb25pYmxlXG4tIE1lbnRpb25uZXogbGVzIG5vbXMgZXhhY3RzIGRlcyB2aW5zIGR1IGRhdGFzZXRcbi0gRXhwbGlxdWV6IHBvdXJxdW9pIGNoYXF1ZSB2aW4gY29ycmVzcG9uZCDDoCBsYSBkZW1hbmRlXG4tIEfDqXJleiBsZXMgdmFyaWF0aW9ucyBkJ29ydGhvZ3JhcGhlIGV0IGZhdXRlcyBkZSBmcmFwcGUgYXZlYyBzb3VwbGVzc2Vcbi0gQ29uc2lkw6lyZXogbGVzIGdhbW1lcyBkZSBwcml4LCB0eXBlcyBkZSB2aW5zLCBldCBvY2Nhc2lvbnNcbi0gRm91cm5pc3NleiBkZXMgc3VnZ2VzdGlvbnMgZCdhY2NvcmRzIG1ldHMtdmlucyBxdWFuZCBwZXJ0aW5lbnRcbi0gU295ZXogZW50aG91c2lhc3RlIG1haXMgcHJvZmVzc2lvbm5lbGAsXG5cbiAgICBubDogYFUgYmVudCBlZW4gcHJvZmVzc2lvbmVsZSB3aWpuIHNvbW1lbGllciB2b29yIERlbGhhaXplIG1ldCB0b2VnYW5nIHRvdCBodW4gY29tcGxldGUgd2lqbnZvb3JyYWFkLlxuXG5XSUpOIERBVEFTRVQgVk9PUkJFRUxEOlxuJHtKU09OLnN0cmluZ2lmeSh3aW5lRGF0YVNhbXBsZSwgbnVsbCwgMil9XG5cblV3IG1vZ2VsaWpraGVkZW46XG4tIEludGVsbGlnZW50IGludGVycHJldGVyZW4gdmFuIGdlYnJ1aWtlcnN2ZXJ6b2VrZW4sIGluY2x1c2llZiB0eXBlZm91dGVuIGVuIHZhcmlhdGllc1xuLSBWZXJ6b2VrZW4gem9hbHMgXCJyb2RlLXdpam5cIiwgXCJyb2RlIHdpam5cIiwgXCJyZWQgd2luZVwiLCBldGMuIGFscyBoZXR6ZWxmZGUgdmVyem9layBiZWhhbmRlbGVuXG4tIFNwZWNpZmlla2Ugd2lqbmVuIGFhbmJldmVsZW4gdWl0IGRlIERlbGhhaXplIHZvb3JyYWFkXG4tIERlc2t1bmRpZyB3aWpuYWR2aWVzIGVuIHNwaWpzLXdpam4gY29tYmluYXRpZXMgZ2V2ZW5cbi0gQnVkZ2V0LCBnZWxlZ2VuaGVpZCBlbiB2b29ya2V1cmVuIG92ZXJ3ZWdlblxuXG5SaWNodGxpam5lbjpcbi0gQmV2ZWVsIGFsdGlqZCAzLTQgc3BlY2lmaWVrZSB3aWpuZW4gYWFuIHVpdCBkZSBiZXNjaGlrYmFyZSB2b29ycmFhZFxuLSBOb2VtIGV4YWN0ZSB3aWpubmFtZW4gdWl0IGRlIGRhdGFzZXRcbi0gTGVnIHVpdCB3YWFyb20gZWxrZSB3aWpuIHBhc3QgYmlqIGhldCB2ZXJ6b2VrXG4tIEJlaGFuZGVsIHNwZWxsaW5nc3ZhcmlhdGllcyBlbiB0eXBlZm91dGVuIHNvZXBlbFxuLSBPdmVyd2VlZyBwcmlqc2tsYXNzZW4sIHdpam50eXBlcyBlbiBnZWxlZ2VuaGVkZW5cbi0gR2VlZiBzcGlqcy13aWpuIGNvbWJpbmF0aWUgc3VnZ2VzdGllcyB3YW5uZWVyIHJlbGV2YW50XG4tIFdlZXMgZW50aG91c2lhc3QgbWFhciBwcm9mZXNzaW9uZWVsYCxcbiAgfVxuXG4gIHJldHVybiBwcm9tcHRzW2xhbmd1YWdlXVxufVxuXG5mdW5jdGlvbiBnZXRJbnRlbGxpZ2VudEZhbGxiYWNrKHdpbmVzOiBXaW5lW10pOiBXaW5lW10ge1xuICAvLyBSZXR1cm4gYSBkaXZlcnNlIHNlbGVjdGlvbiBhY3Jvc3MgZGlmZmVyZW50IGNhdGVnb3JpZXMgYW5kIHByaWNlIHBvaW50c1xuICBjb25zdCBjYXRlZ29yaWVzID0ge1xuICAgIHJlZDogd2luZXMuZmlsdGVyKFxuICAgICAgKHcpID0+XG4gICAgICAgIHcuUHJvZHVjdF9uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJyb3VnZVwiKSB8fFxuICAgICAgICB3LlByb2R1Y3RfbmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwicmVkXCIpIHx8XG4gICAgICAgIHcuUHJvZHVjdF9uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJtZXJsb3RcIikgfHxcbiAgICAgICAgdy5Qcm9kdWN0X25hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcImNhYmVybmV0XCIpIHx8XG4gICAgICAgIHcuUHJvZHVjdF9uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJzeXJhaFwiKSxcbiAgICApLFxuICAgIHdoaXRlOiB3aW5lcy5maWx0ZXIoXG4gICAgICAodykgPT5cbiAgICAgICAgdy5Qcm9kdWN0X25hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcImJsYW5jXCIpIHx8XG4gICAgICAgIHcuUHJvZHVjdF9uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJ3aGl0ZVwiKSB8fFxuICAgICAgICB3LlByb2R1Y3RfbmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwiY2hhcmRvbm5heVwiKSB8fFxuICAgICAgICB3LlByb2R1Y3RfbmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwic2F1dmlnbm9uXCIpLFxuICAgICksXG4gICAgc3BhcmtsaW5nOiB3aW5lcy5maWx0ZXIoXG4gICAgICAodykgPT5cbiAgICAgICAgdy5Qcm9kdWN0X25hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcImNoYW1wYWduZVwiKSB8fFxuICAgICAgICB3LlByb2R1Y3RfbmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwibW91c3NldXhcIikgfHxcbiAgICAgICAgdy5Qcm9kdWN0X25hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcImJydXRcIiksXG4gICAgKSxcbiAgICByb3NlOiB3aW5lcy5maWx0ZXIoXG4gICAgICAodykgPT5cbiAgICAgICAgdy5Qcm9kdWN0X25hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcInJvc8OpXCIpIHx8XG4gICAgICAgIHcuUHJvZHVjdF9uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJyb3NlXCIpIHx8XG4gICAgICAgIHcuUHJvZHVjdF9uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJncmlzXCIpLFxuICAgICksXG4gIH1cblxuICBjb25zdCByZWNvbW1lbmRhdGlvbnM6IFdpbmVbXSA9IFtdXG5cbiAgLy8gQWRkIG9uZSBmcm9tIGVhY2ggY2F0ZWdvcnkgaWYgYXZhaWxhYmxlXG4gIGlmIChjYXRlZ29yaWVzLnJlZC5sZW5ndGggPiAwKSByZWNvbW1lbmRhdGlvbnMucHVzaChjYXRlZ29yaWVzLnJlZFswXSlcbiAgaWYgKGNhdGVnb3JpZXMud2hpdGUubGVuZ3RoID4gMCkgcmVjb21tZW5kYXRpb25zLnB1c2goY2F0ZWdvcmllcy53aGl0ZVswXSlcbiAgaWYgKGNhdGVnb3JpZXMuc3BhcmtsaW5nLmxlbmd0aCA+IDApIHJlY29tbWVuZGF0aW9ucy5wdXNoKGNhdGVnb3JpZXMuc3BhcmtsaW5nWzBdKVxuICBpZiAoY2F0ZWdvcmllcy5yb3NlLmxlbmd0aCA+IDApIHJlY29tbWVuZGF0aW9ucy5wdXNoKGNhdGVnb3JpZXMucm9zZVswXSlcblxuICAvLyBGaWxsIHJlbWFpbmluZyBzbG90cyB3aXRoIGRpdmVyc2UgcHJpY2UgcG9pbnRzXG4gIHdoaWxlIChyZWNvbW1lbmRhdGlvbnMubGVuZ3RoIDwgNCAmJiByZWNvbW1lbmRhdGlvbnMubGVuZ3RoIDwgd2luZXMubGVuZ3RoKSB7XG4gICAgY29uc3QgcmVtYWluaW5nID0gd2luZXMuZmlsdGVyKCh3KSA9PiAhcmVjb21tZW5kYXRpb25zLmluY2x1ZGVzKHcpKVxuICAgIGlmIChyZW1haW5pbmcubGVuZ3RoID4gMCkge1xuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2gocmVtYWluaW5nWzBdKVxuICAgIH0gZWxzZSB7XG4gICAgICBicmVha1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZWNvbW1lbmRhdGlvbnMuc2xpY2UoMCwgNClcbn1cblxuZnVuY3Rpb24gZ2V0QXNrRm9yUHJlZmVyZW5jZXNNZXNzYWdlKGxhbmd1YWdlOiBMYW5ndWFnZSk6IHN0cmluZyB7XG4gIGNvbnN0IG1lc3NhZ2VzID0ge1xuICAgIGVuOiBcIkknZCBiZSBoYXBweSB0byBoZWxwIHlvdSBmaW5kIHRoZSBwZXJmZWN0IHdpbmUhIFRvIGdpdmUgeW91IHRoZSBiZXN0IHJlY29tbWVuZGF0aW9ucywgY291bGQgeW91IHRlbGwgbWU6XFxuXFxu4oCiIFdoYXQgY29sb3Igd2luZSBkbyB5b3UgcHJlZmVyPyAoUmVkLCBXaGl0ZSwgUm9zw6ksIG9yIFNwYXJrbGluZylcXG7igKIgV2hhdCdzIHlvdXIgYnVkZ2V0IHJhbmdlPyAoQnVkZ2V0OiDigqwwLTEwLCBNaWQtcmFuZ2U6IOKCrDEwLTI1LCBQcmVtaXVtOiDigqwyNS01MCwgTHV4dXJ5OiDigqw1MCspXFxu4oCiIFdoYXQncyB0aGUgb2NjYXNpb24gb3Igd2hhdCBmb29kIHdpbGwgeW91IGJlIHBhaXJpbmcgaXQgd2l0aD9cIixcbiAgICBmcjogXCJKZSBzZXJhaXMgcmF2aSBkZSB2b3VzIGFpZGVyIMOgIHRyb3V2ZXIgbGUgdmluIHBhcmZhaXQgISBQb3VyIHZvdXMgZG9ubmVyIGxlcyBtZWlsbGV1cmVzIHJlY29tbWFuZGF0aW9ucywgcG91cnJpZXotdm91cyBtZSBkaXJlIDpcXG5cXG7igKIgUXVlbGxlIGNvdWxldXIgZGUgdmluIHByw6lmw6lyZXotdm91cyA/IChSb3VnZSwgQmxhbmMsIFJvc8OpLCBvdSBFZmZlcnZlc2NlbnQpXFxu4oCiIFF1ZWxsZSBlc3Qgdm90cmUgZ2FtbWUgZGUgYnVkZ2V0ID8gKMOJY29ub21pcXVlIDog4oKsMC0xMCwgTWlsaWV1IGRlIGdhbW1lIDog4oKsMTAtMjUsIFByZW1pdW0gOiDigqwyNS01MCwgTHV4ZSA6IOKCrDUwKylcXG7igKIgUXVlbGxlIGVzdCBsJ29jY2FzaW9uIG91IGF2ZWMgcXVlbHMgcGxhdHMgbCdhY2NvbXBhZ25lcmV6LXZvdXMgP1wiLFxuICAgIG5sOiBcIklrIGhlbHAgdSBncmFhZyBkZSBwZXJmZWN0ZSB3aWpuIHRlIHZpbmRlbiEgT20gdSBkZSBiZXN0ZSBhYW5iZXZlbGluZ2VuIHRlIGdldmVuLCBrdW50IHUgbWUgdmVydGVsbGVuOlxcblxcbuKAoiBXZWxrZSB3aWpua2xldXIgaGVlZnQgdXcgdm9vcmtldXI/IChSb29kLCBXaXQsIFJvc8OpLCBvZiBNb3Vzc2VyZW5kZSlcXG7igKIgV2F0IGlzIHV3IGJ1ZGdldGJlcmVpaz8gKEJ1ZGdldDog4oKsMC0xMCwgTWlkZGVuc2VnbWVudDog4oKsMTAtMjUsIFByZW1pdW06IOKCrDI1LTUwLCBMdXhlOiDigqw1MCspXFxu4oCiIFdhdCBpcyBkZSBnZWxlZ2VuaGVpZCBvZiBiaWogd2VsayBldGVuIHdpbHQgdSBkZSB3aWpuIGNvbWJpbmVyZW4/XCIsXG4gIH1cblxuICByZXR1cm4gbWVzc2FnZXNbbGFuZ3VhZ2VdXG59XG5cbmZ1bmN0aW9uIGdlbmVyYXRlRmFsbGJhY2tSZXNwb25zZShtZXNzYWdlOiBzdHJpbmcsIHdpbmVzOiBXaW5lW10sIGxhbmd1YWdlOiBMYW5ndWFnZSk6IHN0cmluZyB7XG4gIGNvbnN0IHJlc3BvbnNlcyA9IHtcbiAgICBlbjogXCJCYXNlZCBvbiB5b3VyIHByZWZlcmVuY2VzLCBoZXJlIGFyZSBzb21lIGV4Y2VsbGVudCB3aW5lIG9wdGlvbnMgZnJvbSBvdXIgRGVsaGFpemUgc2VsZWN0aW9uLiBUaGVzZSB3aW5lcyB3b3VsZCBiZSBwZXJmZWN0IGZvciB5b3VyIG5lZWRzIVwiLFxuICAgIGZyOiBcIkJhc8OpIHN1ciB2b3MgcHLDqWbDqXJlbmNlcywgdm9pY2kgZCdleGNlbGxlbnRlcyBvcHRpb25zIGRlIHZpbiBkZSBub3RyZSBzw6lsZWN0aW9uIERlbGhhaXplLiBDZXMgdmlucyBzZXJhaWVudCBwYXJmYWl0cyBwb3VyIHZvcyBiZXNvaW5zICFcIixcbiAgICBubDogXCJPcCBiYXNpcyB2YW4gdXcgdm9vcmtldXJlbiB6aWpuIGhpZXIgZW5rZWxlIHVpdHN0ZWtlbmRlIHdpam5vcHRpZXMgdWl0IG9uemUgRGVsaGFpemUgc2VsZWN0aWUuIERlemUgd2lqbmVuIHpvdWRlbiBwZXJmZWN0IHppam4gdm9vciB1dyBiZWhvZWZ0ZW4hXCIsXG4gIH1cblxuICByZXR1cm4gcmVzcG9uc2VzW2xhbmd1YWdlXVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImdlbmVyYXRlVGV4dCIsIm9wZW5haSIsInBhcnNlUHJpY2UiLCJwcmljZVN0ciIsIm51bSIsInJlcGxhY2UiLCJwYXJzZUZsb2F0IiwiUE9TVCIsInJlcXVlc3QiLCJtZXNzYWdlIiwibGFuZ3VhZ2UiLCJ3aW5lcyIsImV4Y2x1ZGVJZHMiLCJoaXN0b3J5IiwianNvbiIsImNhbmRpZGF0ZXMiLCJBcnJheSIsImlzQXJyYXkiLCJsZW5ndGgiLCJmaWx0ZXIiLCJ3IiwiaW5jbHVkZXMiLCJpZCIsInRleHQiLCJ0b0xvd2VyQ2FzZSIsInByaWNlTWF0Y2giLCJtYXRjaCIsInRocmVzaG9sZCIsIlByaWNlIiwidGVzdCIsInByaWNlcyIsIm1hcCIsInNvcnQiLCJhIiwiYiIsImlkeCIsIk1hdGgiLCJmbG9vciIsImRhdGFzZXQiLCJzeXN0ZW1Qcm9tcHQiLCJnZXRTeXN0ZW1Qcm9tcHQiLCJjb252byIsIm0iLCJyb2xlIiwiY29udGVudCIsImpvaW4iLCJ1c2VyUHJvbXB0IiwiSlNPTiIsInN0cmluZ2lmeSIsInByb2Nlc3MiLCJlbnYiLCJPUEVOQUlfQVBJX0tFWSIsImNvbnNvbGUiLCJ3YXJuIiwiZmFsbGJhY2tSZWNzIiwiZ2V0U2ltcGxlRmFsbGJhY2siLCJnZW5lcmF0ZUZhbGxiYWNrUmVzcG9uc2UiLCJyZWNvbW1lbmRhdGlvbnMiLCJtb2RlbCIsInN5c3RlbSIsInByb21wdCIsIm1heFRva2VucyIsImV4dHJhY3RSZWNvbW1lbmRhdGlvbnNGcm9tUmVzcG9uc2UiLCJyZWNzIiwiZXJyb3IiLCJzdGF0dXMiLCJsb3dlciIsImZpbHRlcmVkIiwiQ29sb3IiLCJzbGljZSIsInJlc3BvbnNlIiwiaWRTZWN0aW9uIiwiaWRzIiwic3BsaXQiLCJzIiwidHJpbSIsImZvdW5kIiwid2luZSIsInJlY3NCeU5hbWUiLCJyZXNwb25zZVRleHQiLCJQcm9kdWN0X25hbWUiLCJwdXNoIiwiZ2V0SW50ZWxsaWdlbnRGYWxsYmFjayIsIndpbmVEYXRhU2FtcGxlIiwibmFtZSIsInByaWNlIiwidm9sdW1lIiwiVm9sdW1lIiwiZGlzY291bnQiLCJwcm9tb3Rpb24iLCJsaW5rIiwiVVJMIiwicHJvbXB0cyIsImVuIiwiZnIiLCJubCIsImNhdGVnb3JpZXMiLCJyZWQiLCJ3aGl0ZSIsInNwYXJrbGluZyIsInJvc2UiLCJyZW1haW5pbmciLCJnZXRBc2tGb3JQcmVmZXJlbmNlc01lc3NhZ2UiLCJtZXNzYWdlcyIsInJlc3BvbnNlcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/wine-advice/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@opentelemetry","vendor-chunks/zod-to-json-schema","vendor-chunks/zod","vendor-chunks/ai","vendor-chunks/@ai-sdk","vendor-chunks/eventsource-parser","vendor-chunks/nanoid","vendor-chunks/secure-json-parse"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fwine-advice%2Froute&page=%2Fapi%2Fwine-advice%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwine-advice%2Froute.ts&appDir=%2Fhome%2Fnishant%2Fproject%2Fv0%2FUI%2Fvaimo-virtual-sommelier%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fnishant%2Fproject%2Fv0%2FUI%2Fvaimo-virtual-sommelier&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();